# ═══════════════════════════════════════════════════════════════
# CoinRuler Complete Environment Configuration
# ═══════════════════════════════════════════════════════════════
# Copy this to .env and fill in your actual values
# ═══════════════════════════════════════════════════════════════

# ─────────────────────────────────────────────────────────────
# 🔐 CORE SERVICES (REQUIRED)
# ─────────────────────────────────────────────────────────────

# MongoDB Atlas Connection
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/?retryWrites=true&w=majority&appName=YourApp
DATABASE_NAME=coinruler

# Discord Bot
DISCORD_TOKEN=YOUR_BOT_TOKEN_HERE
DISCORD_CHANNEL_ID=YOUR_CHANNEL_ID
OWNER_ID=YOUR_DISCORD_USER_ID

# ─────────────────────────────────────────────────────────────
# 💰 TRADING & EXCHANGE APIs (REQUIRED)
# ─────────────────────────────────────────────────────────────

# Coinbase Advanced Trade API (Production HMAC keys - keep DRY_RUN=true until ready)
# DO NOT USE PEM / ECDSA / Ed25519 keys here. Those are CDP/onchain keys and will 401.
COINBASE_API_KEY=
COINBASE_API_SECRET=

# Safety Controls
DRY_RUN=true
ORDER_EXECUTION_ENABLED=false

# ─────────────────────────────────────────────────────────────
# 🤖 AI SERVICES (REQUIRED FOR CHAT & ANALYSIS)
# ─────────────────────────────────────────────────────────────

# OpenAI (for chat, analysis, code generation)
OPENAI_API_KEY=sk-proj-YOUR_KEY_HERE
OPENAI_MODEL=gpt-4

# Anthropic Claude (optional, for advanced reasoning)
ANTHROPIC_API_KEY=sk-ant-YOUR_KEY_HERE
ANTHROPIC_MODEL=claude-3-opus-20240229

# ─────────────────────────────────────────────────────────────
# 🎯 TRADING THRESHOLDS & RULES
# ─────────────────────────────────────────────────────────────

# BTC Rules
BTC_BASELINE=0.05
BTC_PROFIT_THRESHOLD=0.15
BTC_REBUY_THRESHOLD=0.10
BTC_STOP_LOSS=0.25
BTC_MAX_TRADES_PER_DAY=10

# XRP Rules
XRP_BASELINE=10
XRP_PROFIT_THRESHOLD=0.20
XRP_REBUY_THRESHOLD=0.15

# Risk Management
MAX_POSITION_SIZE_USD=10000
MAX_PORTFOLIO_RISK_PERCENT=0.05
RISK_LEVEL=medium
MIN_TRADE_USD=10

# Throttling
TRADE_THROTTLE_HOURS=3
MAX_CHAIN_RUNS=10

# ─────────────────────────────────────────────────────────────
# 🔔 MONITORING & ALERTS
# ─────────────────────────────────────────────────────────────

# Discord Webhooks
DISCORD_MONITOR_WEBHOOK=https://discord.com/api/webhooks/YOUR_WEBHOOK
DISCORD_ALERT_WEBHOOK=https://discord.com/api/webhooks/YOUR_WEBHOOK
DISCORD_ERROR_WEBHOOK=https://discord.com/api/webhooks/YOUR_WEBHOOK

# Slack (optional)
SLACK_WEBHOOK=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
SLACK_CHANNEL=#crypto-alerts

# Twilio SMS (optional, for critical alerts)
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=your_auth_token
TWILIO_FROM=+1234567890
TWILIO_TO=+1234567890

# Error Tracking
SENTRY_DSN=https://xxx@sentry.io/xxx
DATADOG_API_KEY=your_datadog_key

# ─────────────────────────────────────────────────────────────
# 📊 MARKET DATA APIs
# ─────────────────────────────────────────────────────────────

# News & Sentiment
NEWS_API_KEY=your_newsapi_key
CRYPTO_NEWS_API_KEY=your_cryptonews_key

# Whale Alerts
# Provider priority: Abyiss (preferred) → Whale Alert → mock
# Configure Abyiss for premium whale tracking:
ABYISS_API_KEY=your_abyiss_api_key
ABYISS_PROVIDER=abyiss
ABYISS_WHALE_MIN_USD=500000
ABYISS_DEFAULT_EXCHANGE=coinbase
ABYISS_DEFAULT_MARKET=BTCUSDT
# Or use Whale Alert as fallback:
WHALE_ALERT_API_KEY=your_whale_alert_key
WHALE_ALERT_MIN_USD=1000000

# Market Data
CRYPTO_COMPARE_API_KEY=your_cryptocompare_key
# CoinGecko now requires API keys on many endpoints. We accept both names.
COINGECKO_API_KEY=your_coingecko_key
COIN_GECKO_API_KEY=your_coingecko_key  # legacy alias; either works
GLASSNODE_API_KEY=your_glassnode_key

# On-Chain Data
ETHERSCAN_API_KEY=your_etherscan_key
BLOCKCHAIN_COM_API_KEY=your_blockchain_key

# ─────────────────────────────────────────────────────────────
# 🌐 WEB DASHBOARD (REQUIRED)
# ─────────────────────────────────────────────────────────────

# Basic Auth (fallback)
WEB_USERNAME=owner
WEB_PASSWORD=YOUR_SECURE_PASSWORD_HERE

# Discord OAuth (preferred)
DISCORD_CLIENT_ID=YOUR_CLIENT_ID
DISCORD_CLIENT_SECRET=YOUR_CLIENT_SECRET
DISCORD_REDIRECT_URI=http://localhost:3000/auth/callback

# Session Security
SESSION_SECRET=GENERATE_RANDOM_32_CHAR_STRING
JWT_SECRET=GENERATE_ANOTHER_RANDOM_STRING

# API Connection
# Prefer API_PORT to avoid conflicts with web dev server on PORT.
API_BASE=http://localhost:3001
NEXT_PUBLIC_API_BASE=http://localhost:3001
API_PORT=3001
WEB_ORIGIN=http://localhost:3000

# ─────────────────────────────────────────────────────────────
# 🔄 AUTOMATION & WORKFLOWS
# ─────────────────────────────────────────────────────────────

# Auto-Approval Settings
AUTO_APPROVE_ENABLED=false
AUTO_APPROVE_MAX_USD=100
AUTO_APPROVE_WHITELIST=BTC,XRP,USDC

# Auto-Rebalancing
AUTO_REBALANCE_ENABLED=false
REBALANCE_INTERVAL_HOURS=24
REBALANCE_THRESHOLD_PERCENT=0.05

# Key Rotation
AUTO_ROTATE_KEYS=true
ROTATION_INTERVAL_HOURS=168
ROTATION_SCHEDULER_ENABLED=true

# Self-Healing
AUTO_RECOVERY_ENABLED=true
MAX_RETRY_ATTEMPTS=3
RETRY_BACKOFF_MS=1000

# ─────────────────────────────────────────────────────────────
# 🪝 WEBHOOKS & CALLBACKS
# ─────────────────────────────────────────────────────────────

# Coinbase Webhooks
COINBASE_WEBHOOK_SECRET=your_webhook_secret
COINBASE_WEBHOOK_URL=https://your-domain.com/webhooks/coinbase

# TradingView Alerts
TRADING_VIEW_WEBHOOK_SECRET=your_tv_secret
TRADING_VIEW_WEBHOOK_URL=https://your-domain.com/webhooks/tradingview

# Custom Webhooks
CUSTOM_WEBHOOK_SECRET=your_custom_secret

# ─────────────────────────────────────────────────────────────
# 🚀 DEPLOYMENT & HOSTING
# ─────────────────────────────────────────────────────────────

# Railway
RAILWAY_STATIC_URL=https://your-app.up.railway.app
RAILWAY_SERVICE_URL=https://your-api.up.railway.app
RAILWAY_ENVIRONMENT=production

# Server Config
NODE_ENV=development
PORT=3001
WEB_PORT=3000
LOG_LEVEL=info

# ─────────────────────────────────────────────────────────────
# 🧪 TESTING & DEVELOPMENT
# ─────────────────────────────────────────────────────────────

# Test Mode
TEST_MODE=false
MOCK_EXCHANGE=false
MOCK_PRICES=false

# Logging
DEBUG=coinruler:*
VERBOSE_LOGGING=true
LOG_FILE=./logs/coinruler.log

# ─────────────────────────────────────────────────────────────
# 🔬 ADVANCED FEATURES (OPTIONAL)
# ─────────────────────────────────────────────────────────────

# Machine Learning
ML_ENABLED=false
ML_MODEL_PATH=./models
ML_RETRAIN_INTERVAL_DAYS=7

# Backtesting
BACKTEST_START_DATE=2023-01-01
BACKTEST_END_DATE=2024-01-01
BACKTEST_INITIAL_CAPITAL=10000

# Monte Carlo Simulations
MC_SIMULATIONS=1000
MC_DAYS=30
MC_CONFIDENCE_INTERVAL=0.95

# ─────────────────────────────────────────────────────────────
# 📝 NOTES
# ─────────────────────────────────────────────────────────────
#
# 1. Never commit this file with real values to public repos
# 2. Rotate all API keys regularly (especially after any exposure)
# 3. Keep DRY_RUN=true until you've thoroughly tested
# 4. Use Railway/Vercel/AWS Secrets Manager for production
# 5. Enable 2FA on all services
# 6. Use hardware security keys for Coinbase
# 7. Set up alerts for all critical operations
# 8. Test with small amounts first
# 9. Monitor logs constantly during initial deployment
# 10. Have a kill switch ready (already built into dashboard)
#
# ═══════════════════════════════════════════════════════════════
